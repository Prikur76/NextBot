{% load i18n %}
{% load static %}
<script type="text/javascript">
(function($) {
    $(document).ready(function() {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        function updateSelectedCount() {
            var selectedCount = $('input.action-select:checked').length;
            if (selectedCount > 0) {
                $('#selected-count').remove();
                $('.actions').prepend(
                    '<span id="selected-count" style="margin-right: 10px; padding: 5px 10px; background: #007cba; color: white; border-radius: 3px; font-weight: bold;">' +
                    '–í—ã–±—Ä–∞–Ω–æ: ' + selectedCount + '</span>'
                );
            } else {
                $('#selected-count').remove();
            }
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—ã–±–æ—Ä–∞
        $('input.action-select').change(updateSelectedCount);
        updateSelectedCount();
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ–º –∏–∫–æ–Ω–∫–∏ –∫ actions –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        setTimeout(function() {
            $('select[name="action"] option').each(function() {
                var text = $(this).text();
                if (text.includes('CSV')) {
                    $(this).text('üìÑ ' + text);
                } else if (text.includes('Excel')) {
                    $(this).text('üìä ' + text);
                } else if (text.includes('–ê—Ä—Ö–∏–≤')) {
                    $(this).text('üì¶ ' + text);
                } else if (text.includes('–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å')) {
                    $(this).text('üîÑ ' + text);
                } else if (text.includes('–¥—É–±–ª–∏–∫–∞—Ç')) {
                    $(this).text('üîç ' + text);
                } else if (text.includes('GSheets')) {
                    $(this).text('üìä ' + text);
                }
            });
        }, 100);        
    });
})(django.jQuery);
</script>